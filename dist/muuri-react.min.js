/**
* Muuri-react v3.1.5
* https://paol-imi.github.io/muuri-react
* Copyright (c) 2020-present, Paol-imi
* Released under the MIT license
* https://github.com/Paol-imi/muuri-react/blob/master/LICENSE
* @license MIT
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("muuri"),require("react")):"function"==typeof define&&define.amd?define(["exports","muuri","react"],t):t((e=e||self).MuuriReact={},e.Muuri,e.React)}(this,(function(e,t,n){"use strict";t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;var r="default"in n?n.default:n;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i="_component";function a(e){return!!e[i]}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e,t){a(e)?Object.assign(e[i],t):e[i]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t)}function l(e){return e[i]}function c(e){e._component=null}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){return e(t={exports:{}},t.exports),t.exports
/** @license React v16.13.1
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   */}t.prototype.getId=function(){return l(this).id},t.prototype.getGroupIds=function(){return l(this).groupIds},t.prototype.getSizerElement=function(){return l(this).sizerElement},t.Item.prototype.getKey=function(){return l(this).key},t.Item.prototype.getProps=function(){return l(this).props},t.Item.prototype.getData=function(){return l(this).data},t.Item.prototype.setData=function(e){l(this).data=e};var g="function"==typeof Symbol&&Symbol.for,h=g?Symbol.for("react.element"):60103,m=g?Symbol.for("react.portal"):60106,y=g?Symbol.for("react.fragment"):60107,v=g?Symbol.for("react.strict_mode"):60108,b=g?Symbol.for("react.profiler"):60114,C=g?Symbol.for("react.provider"):60109,O=g?Symbol.for("react.context"):60110,_=g?Symbol.for("react.async_mode"):60111,S=g?Symbol.for("react.concurrent_mode"):60111,w=g?Symbol.for("react.forward_ref"):60112,R=g?Symbol.for("react.suspense"):60113,T=g?Symbol.for("react.suspense_list"):60120,E=g?Symbol.for("react.memo"):60115,P=g?Symbol.for("react.lazy"):60116,I=g?Symbol.for("react.block"):60121,j=g?Symbol.for("react.fundamental"):60117,D=g?Symbol.for("react.responder"):60118,x=g?Symbol.for("react.scope"):60119;function k(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case h:switch(e=e.type){case _:case S:case y:case b:case v:case R:return e;default:switch(e=e&&e.$$typeof){case O:case w:case P:case E:case C:return e;default:return t}}case m:return t}}}function A(e){return k(e)===S}var M={AsyncMode:_,ConcurrentMode:S,ContextConsumer:O,ContextProvider:C,Element:h,ForwardRef:w,Fragment:y,Lazy:P,Memo:E,Portal:m,Profiler:b,StrictMode:v,Suspense:R,isAsyncMode:function(e){return A(e)||k(e)===_},isConcurrentMode:A,isContextConsumer:function(e){return k(e)===O},isContextProvider:function(e){return k(e)===C},isElement:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===h},isForwardRef:function(e){return k(e)===w},isFragment:function(e){return k(e)===y},isLazy:function(e){return k(e)===P},isMemo:function(e){return k(e)===E},isPortal:function(e){return k(e)===m},isProfiler:function(e){return k(e)===b},isStrictMode:function(e){return k(e)===v},isSuspense:function(e){return k(e)===R},isValidElementType:function(e){return"string"==typeof e||"function"==typeof e||e===y||e===S||e===b||e===v||e===R||e===T||"object"==typeof e&&null!==e&&(e.$$typeof===P||e.$$typeof===E||e.$$typeof===C||e.$$typeof===O||e.$$typeof===w||e.$$typeof===j||e.$$typeof===D||e.$$typeof===x||e.$$typeof===I)},typeOf:k},F=p((function(e,t){})),G=(F.AsyncMode,F.ConcurrentMode,F.ContextConsumer,F.ContextProvider,F.Element,F.ForwardRef,F.Fragment,F.Lazy,F.Memo,F.Portal,F.Profiler,F.StrictMode,F.Suspense,F.isAsyncMode,F.isConcurrentMode,F.isContextConsumer,F.isContextProvider,F.isElement,F.isForwardRef,F.isFragment,F.isLazy,F.isMemo,F.isPortal,F.isProfiler,F.isStrictMode,F.isSuspense,F.isValidElementType,F.typeOf,p((function(e){e.exports=M})),Object.getOwnPropertySymbols),H=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;function q(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}})()&&Object.assign,Function.call.bind(Object.prototype.hasOwnProperty);function L(){}function z(){}z.resetWarningCache=L;var N=p((function(e){e.exports=function(){function e(e,t,n,r,o,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:z,resetWarningCache:L};return n.PropTypes=n,n}()})),V=n.createContext({}),U=V.Provider,W=function(){return n.useContext(V)};V.displayName="GridProvider";var B=n.createContext({}),K=B.Provider,Y=function(){return n.useContext(B)};function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t,n){return t&&J(e.prototype,t),n&&J(e,n),e}B.displayName="ItemProvider";var X=function(){function e(){Z(this,e),o(this,"_eventsMap",new Map),o(this,"_payloadsMap",new Map)}return Q(e,[{key:"enableEvent",value:function(e,t){this._eventsMap.set(e,t)}},{key:"emitEvent",value:function(e,t){this.isEnabled(e)&&(this._payloadsMap.set(e,t),this._eventsMap.get(e)())}},{key:"getPayload",value:function(e){return this._payloadsMap.get(e)}},{key:"isEnabled",value:function(e){return this._eventsMap.has(e)}},{key:"destroy",value:function(){this._eventsMap.clear(),this._payloadsMap.clear()}}]),e}(),ee=function(){function e(){Z(this,e),o(this,"_requests",[])}return Q(e,[{key:"useInit",value:function(){this._requests=[]}},{key:"emit",value:function(e){for(var t=0;t<this._requests.length;t++)this._requests[t](e[t])}},{key:"requestItem",value:function(e){this._requests.push(e)}},{key:"destroy",value:function(){this._requests=[]}}]),e}();function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ne(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function ie(e,t,n){return(ie=oe()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&te(o,n.prototype),o}).apply(null,arguments)}function ae(e){var t="function"==typeof Map?new Map:void 0;return(ae=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return ie(e,arguments,re(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),te(r,e)})(e)}function se(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(r,e);var t,n=(t=r,function(){var e,n=re(t);if(se()){var r=re(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return ne(this,e)});function r(e){var t;return Z(this,r),(t=n.call(this,e)).name="Invariant",t}return r}(ae(Error));function le(e,t){if(!e)throw new ue("Invariant failed")}var ce=function(){function e(){Z(this,e),o(this,"_item",null),o(this,"_instance",{})}return Q(e,[{key:"set",value:function(e,t){this._item?u(this._item,o({},e,t)):this._instance[e]=t}},{key:"get",value:function(e){return this._item?l(this._item)[e]:this._instance[e]}},{key:"delete",value:function(){this._item&&c(this._item)}},{key:"setItem",value:function(e){this._item=e,u(this._item,this._instance),this._instance={}}},{key:"getItem",value:function(){return le(null!==this._item),this._item}},{key:"hasItem",value:function(){return null!==this._item}},{key:"destroy",value:function(){this._item=null,this._instance={}}}]),e}(),fe=function(){function e(){Z(this,e),o(this,"_itemsToRemove",[])}return Q(e,[{key:"useInit",value:function(){this._itemsToRemove=[]}},{key:"removeItem",value:function(e){this._itemsToRemove.push(e)}},{key:"getItemsToRemove",value:function(){return this._itemsToRemove}},{key:"destroy",value:function(){this._itemsToRemove=[]}}]),e}(),de=function(){function e(){Z(this,e),o(this,"_itemsToRefresh",void 0),o(this,"_itemsToShow",void 0),o(this,"_itemsToHide",void 0),o(this,"_isRendering",void 0),this._itemsToRefresh=[],this._itemsToShow=[],this._itemsToHide=[],this._isRendering=!1}return Q(e,[{key:"useInit",value:function(){var e=this;this._itemsToRefresh=[],this._itemsToShow=[],this._itemsToHide=[],this._isRendering=!0,n.useEffect((function(){e._isRendering=!1}))}},{key:"refreshItem",value:function(e){if(this._isRendering)this._itemsToRefresh.push(e);else{var t=e.getGrid();t.refreshItems([e]),t.layout()}}},{key:"setItemVisibility",value:function(e,t,n){if(this._isRendering)t?this._itemsToShow.push(e):this._itemsToHide.push(e);else{var r=e.getGrid();t?r.show([e],{instant:n}):r.hide([e],{instant:n})}}},{key:"getItemsToRefresh",value:function(){return this._itemsToRefresh}},{key:"getItemsToShow",value:function(){return this._itemsToShow}},{key:"getItemsToHide",value:function(){return this._itemsToHide}},{key:"destroy",value:function(){this._itemsToRefresh=[],this._itemsToShow=[],this._itemsToHide=[]}}]),e}(),pe=function(){function e(){Z(this,e),o(this,"_fiber",void 0),o(this,"_flag","0")}return Q(e,[{key:"useInit",value:function(e){var t=this;this.updateFlag(),n.useEffect((function(){le(null!==e.current),t._fiber=function(e){var t=Object.keys(e).find((function(e){return e.startsWith("__reactInternalInstance$")}));return le("string"==typeof t),e[t]}(e.current)}),[])}},{key:"getStateNodes",value:function(e){var t=[];if(0===e.length)return t;var n=he(this._fiber,this._flag).child;return e.forEach((function(e){for(;n.index!==e;)n=n.sibling;t.push(function(e){var t=e.child.child;for(;!(t.stateNode instanceof HTMLElement);)t=t.child;return t.stateNode}(n))})),t}},{key:"append",value:function(e){var t=he(this._fiber,this._flag);me(t,e),t.alternate&&e.alternate&&me(t.alternate,e.alternate)}},{key:"remove",value:function(e){var t=he(this._fiber,this._flag),n=ye(t,e);return t.alternate&&n.alternate&&ye(t.alternate,e),n}},{key:"getFlagProp",value:function(){return o({},ge,this._flag)}},{key:"updateFlag",value:function(){"0"===this._flag?this._flag="1":this._flag="0"}},{key:"destroy",value:function(){this._fiber=null}}]),e}(),ge="muuri-react-flag";function he(e,t){if(!e.alternate)return e;var n=e.memoizedProps[ge];if(n===e.alternate.memoizedProps[ge]){for(var r=e;r.return;)r=r.return;return r.stateNode.current===r?e:e.alternate}return n===t?e:e.alternate}function me(e,t){var n;if(e.child){for(var r=e.child;r.sibling;)r=r.sibling;t.index=r.index+1,r.sibling=t}else e.child=t,t.index=0;t.return=e,t._debugOwner&&(t._debugOwner=null===(n=e.return)||void 0===n?void 0:n.return)}function ye(e,t){var n,r,o,i=e.child;if(be(i,t)){for(;be(i.sibling,t);)i=i.sibling;o=(r=i).sibling,r.sibling=r.sibling.sibling,n=o,ve(i)}else n=function(e){var t=e.child;return e.child=e.child.sibling,t}(e),(i=i.sibling)&&ve(i);return n.sibling=null,n}function ve(e){for(;e.sibling;)e.sibling.index=e.index+1,e=e.sibling}function be(e,t){return e.child.child.key!==t}var Ce=function(){function e(){Z(this,e),o(this,"_oldChildrenArray",[]),o(this,"_children",[]),o(this,"_indicesToAdd",[]),o(this,"_dragCounter",0)}return Q(e,[{key:"useInit",value:function(e){var t=n.Children.toArray(e);this._indicesToAdd=Oe(t,this._oldChildrenArray),this._children=e||[],this._oldChildrenArray=t}},{key:"remove",value:function(e){return this._oldChildrenArray.splice(e,1)[0]}},{key:"append",value:function(e){this._oldChildrenArray.push(e)}},{key:"getIndicesToAdd",value:function(){return this._indicesToAdd}},{key:"render",value:function(e){var t=n.Children.map(this._children,(function(t){return e(t,t.key)}));return this.flush(),t}},{key:"incrementDragCounter",value:function(){this._dragCounter+=1}},{key:"decrementDragCounter",value:function(){this._dragCounter-=1}},{key:"flush",value:function(){this._children=[]}},{key:"destroy",value:function(){this.flush()}}]),e}();function Oe(e,t){for(var n=[],r=0,o=0;o<e.length;o++){var i=_e(t,e[o],r);-1===i?n.push(o):r=i}return n}function _e(e,t,n){for(var r=n=n>e.length?e.length:n;r<e.length;r++)if(Se(t,e[r]))return r;for(var o=0;o<n;o++)if(Se(t,e[o]))return o;return-1}function Se(e,t){return e.key===t.key}var we=["relative","absolute","fixed"];function Re(e){return n.useRef(e).current}function Te(e){var t=n.useRef(e);if(t.current===e)return!0;var r=function(e,t){if(e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!0;return!1}(t.current,e);return t.current=e,r}function Ee(e){var t=n.useRef();return t.current||(t.current=e()),t.current}function Pe(){var e=n.useState()[1];return Re((function(){e(Object.create(null))}))}function Ie(e){var t=e.children,o=e.itemClasses,i=e.itemAddController,a=e.itemRemoveController,s=e.propsToData,l=e.itemKey,c=e.grid,f=Ee((function(){var e=new X,t=new ce;return t.set("key",l),t.set("eventController",e),{eventController:e,itemRefController:t,itemRemoveController:a,grid:c}}));if(f.itemRefController.set("props",t.props),f.itemRemoveController=a,f.grid=c,s){var p=s(t.props);le("object"===d(p),"The data returned by 'propsToData' must be an object, founded ".concat(d(p))),f.itemRefController.set("data",p)}return n.useEffect((function(){return i.requestItem((function(e){!function(e){u(e,{props:{},data:{}}),Object.defineProperty(e,"_sortData",{get:function(){return this.getData()},set:function(){}})}(e),function(e,t){e.style.position="absolute";var n=e.setAttribute.bind(e);e.setAttribute=function(r,o){if("class"===r){var i=(e.getAttribute("class")||"").split(" ").filter((function(e){return t.includes(e)}));o="".concat(o," ").concat(i.join(" "))}n(r,o)}}(e.getElement(),o),f.itemRefController.setItem(e)})),function(){var e=f.itemRefController.getItem();le(null!==e);var t=e.getElement();le(void 0!==t),e.isDragging()&&(t.style.display="none",t.style.visibility="hidden",e._drag&&e._drag.destroy(),f.grid.getElement().appendChild(t)),f.itemRefController.delete(),f.itemRemoveController.removeItem(e),f.itemRefController.destroy(),f.eventController.destroy()}}),[]),r.createElement(K,{value:f},t)}Ie.propTypes={itemAddController:N.object.isRequired,itemClasses:N.arrayOf(N.string.isRequired).isRequired,propsToData:N.func,children:N.element.isRequired,grid:N.instanceOf(t).isRequired},Ie.displayName="ItemComponent";function je(e){return e._settings.containerClass}var De=["itemClass","itemVisibleClass","itemHiddenClass","itemPositioningClass","itemDraggingClass","itemReleasingClass","itemPlaceholderClass"];function xe(e){return De.map((function(t){return e._settings[t]}))}function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ae(e,t,n){n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n||{},{layout:!1}),"function"==typeof t&&function(e,t,n){e.sort((function(e,n){return t(e.getData(),n.getData(),e,n)}),n)}(e,t,n),"string"==typeof t&&function(e,t,n){e.sort(t,n)}(e,t,n),Array.isArray(t)&&function(e,t,n){var r=e.getItems(),o=[],i=[];r.forEach((function(e){var n=e._component.key,r=t.findIndex((function(e){return e===n}));r>-1?o[r]=e:i.push(e)})),e.sort(Array.prototype.concat(o.filter((function(e){return!!e})),i),n)}(e,t,n)}function Me(e){var t=e.children,o=e.gridProps,i=e.grid,s=e.filter,c=e.sort,p=e.sortOptions,g=e.addOptions,h=e.propsToData,m=e.onSend,y=e.onDragStart,v=e.onDragEnd,b=e.onFilter,C=e.onSort,O=e.onMount,_=e.onUnmount,S=e.forceSync,w=e.dragFixed,R=e.dragEnabled,T=e.instantLayout,E=Ee((function(){return{gridRef:n.createRef(),gridClass:je(i),itemClasses:xe(i),childrenController:new Ce,fiberController:new pe,itemAddController:new ee,itemRemoveController:new fe,layoutController:new de,onUnmount:_,onDragStart:y,onDragEnd:v,onFilter:b,onSort:C,onSend:m}})),P={indicesToAdd:[],addedDOMItems:[],itemsToRemove:[],itemsToRefresh:[],itemsToShow:[],itemsToHide:[],hasAdded:!1,hasRemoved:!1,hasFiltered:!1,hasSorted:!1,hasRefreshed:!1,hasShown:!1,hasHidden:!1};n.useEffect((function(){return i.on("beforeSend",(function(e){var t=e.item,n=e.fromGrid,r=e.fromIndex;l(t).sentPayload||u(t,{sentPayload:{fromChildrenController:E.childrenController,fromFiberController:E.fiberController,fromGrid:n,fromIndex:r}})})).on("receive",(function(e){var t=e.item,n=e.toGrid,r=e.toIndex,o=E.childrenController,a=E.fiberController;if(t.isDragging()){u(t,{receivedPayload:{toChildrenController:o,toFiberController:a,toGrid:n,toIndex:r}})}else{var s=l(t).sentPayload;le(null!==s&&"object"===d(s));var c=s.fromChildrenController,f=s.fromFiberController;u(t,{sentPayload:null});var p=f.remove(t.getKey()),g=c.remove(p.index);a.append(p),o.append(g)}l(t).eventController.emitEvent("send",i)})).on("dragInit",(function(e,t){E.childrenController.incrementDragCounter(),l(e).eventController.emitEvent("drag",!0),E.onDragStart&&E.onDragStart(e,t)})).on("dragEnd",(function(e){var t=l(e).sentPayload,n=l(e).receivedPayload;if(t&&n){var r=t.fromChildrenController,o=t.fromFiberController,i=t.fromGrid,a=t.fromIndex,s=n.toChildrenController,c=n.toFiberController,f=n.toGrid,d=n.toIndex;if(u(e,{sentPayload:null,receivedPayload:null}),i!==f){le("function"==typeof E.onSend);var p=o.remove(e.getKey()),g=r.remove(p.index);c.append(p),s.append(g),E.onSend({key:l(e).key,fromGrid:i,fromIndex:a,fromId:l(i).id,fromGroupIds:l(i).groupIds,toGrid:f,toIndex:d,toId:l(f).id,toGroupIds:l(f).groupIds})}}})).on("dragReleaseEnd",(function(e){E.childrenController.decrementDragCounter(),l(e).eventController.emitEvent("drag",!1),E.onDragEnd&&E.onDragEnd(e)})).on("showStart",(function(e){a(e[0])&&e.forEach((function(e){var t=l(e).eventController;!0!==t.getPayload("show")&&t.emitEvent("show",!0)}))})).on("hideEnd",(function(e){e.forEach((function(e){var t=l(e).eventController;!1!==t.getPayload("show")&&t.emitEvent("show",!1)}))})).on("filter",(function(e,t){E.onFilter&&E.onFilter(e,t)})).on("sort",(function(e,t){E.onSort&&E.onSort(e,t)})),w&&i.on("dragInit",(function(e){var t=e.getElement();le(void 0!==t);var n=getComputedStyle(t),r=n.width,o=n.height,i=n.paddingTop;u(e,{dragWidth:t.style.width,dragHeight:t.style.height,dragPaddingTop:t.style.paddingTop}),t.style.width=r,t.style.height=o,t.style.paddingTop=i})).on("dragReleaseEnd",(function(e){var t=e.getElement();le(void 0!==t);var n=l(e),r=n.dragWidth,o=n.dragHeight,i=n.dragPaddingTop;t.style.width=r,t.style.height=o,t.style.paddingTop=i})),le(null!==E.gridRef.current),i._element=E.gridRef.current,function(e,t){var n=getComputedStyle(e).position;we.includes(n)||(e.style.position=we[0]),e.classList.add(t);var r=e.setAttribute.bind(e);e.setAttribute=function(n,o){"class"===n&&((e.getAttribute("class")||"").split(" ").includes(t)||(o="".concat(o," ").concat(t)));r(n,o)}}(E.gridRef.current,E.gridClass),function(e){var t=document.createElement("div");t.style.visibility="hidden",t.style.position="absolute",t.classList.add("grid-sizer"),u(e,{sizerElement:t});var n=e.getElement();0===n.children.length?n.appendChild(t):n.insertBefore(t,n.children[0])}(i),O&&O(i),function(){E.childrenController.destroy(),E.fiberController.destroy(),E.itemRemoveController.destroy(),E.itemAddController.destroy(),E.layoutController.destroy()}}),[]),E.childrenController.useInit(t),E.fiberController.useInit(E.gridRef),E.itemRemoveController.useInit(),E.itemAddController.useInit(),E.layoutController.useInit();var I=Te([s]),j=Te([c,p]);n.useEffect((function(){u(i,{dragEnabled:R}),P.indicesToAdd=E.childrenController.getIndicesToAdd(),P.addedDOMItems=E.fiberController.getStateNodes(P.indicesToAdd),P.itemsToRemove=E.itemRemoveController.getItemsToRemove(),P.itemsToRefresh=E.layoutController.getItemsToRefresh(),P.itemsToShow=E.layoutController.getItemsToShow(),P.itemsToHide=E.layoutController.getItemsToHide(),E.onUnmount=_,E.onDragStart=y,E.onDragEnd=v,E.onFilter=b,E.onSort=C,E.onSend=m})),n.useEffect((function(){if(P.itemsToRemove.length&&(!function(e,t){e.remove(t,{layout:!1,removeElements:!1})}(i,P.itemsToRemove),P.hasRemoved=!0),P.indicesToAdd.length){!function(e,t,n,r,o){for(var i=0;i<t.length;i++)e.add(t[i],{index:n[i],layout:!1});!o&&(null==r?void 0:r.show)&&e.show(e.getItems(n),{layout:!1})}(i,P.addedDOMItems,P.indicesToAdd,g,s);var e=i.getItems(P.indicesToAdd);E.itemAddController.emit(e),P.hasAdded=!0}s&&(I||P.hasAdded||S)&&(!function(e,t){e.filter((function(e){return t(e.getData(),e)}),{layout:!1})}(i,s),P.hasFiltered=!0),c&&(j||P.hasAdded||S)&&(Ae(i,c,p),P.hasSorted=!0),!s&&P.itemsToShow.length&&(!function(e,t){e.show(t,{layout:!1})}(i,P.itemsToShow),P.hasShown=!0),!s&&P.itemsToHide.length&&(!function(e,t){e.hide(t,{layout:!1})}(i,P.itemsToHide),P.hasHidden=!0),P.itemsToRefresh.length&&(i.refreshItems(P.itemsToRefresh),P.hasRefreshed=!0),(P.hasAdded||P.hasRemoved||P.hasSorted||P.hasFiltered||P.hasRefreshed||P.hasShown||P.hasHidden)&&i.layout(T)}));var D=Ee((function(){return{layoutController:E.layoutController,grid:i}}));return r.createElement(U,{value:D},r.createElement("div",f({},o,{ref:E.gridRef},E.fiberController.getFlagProp()),E.childrenController.render((function(e,t){return r.createElement(Ie,{key:t,itemKey:t,grid:i,propsToData:h,itemClasses:E.itemClasses,itemAddController:E.itemAddController,itemRemoveController:E.itemRemoveController},e)}))))}function Fe(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}Me.propTypes={grid:N.object.isRequired,gridProps:N.object,filter:N.oneOfType([N.string,N.func]),sort:N.oneOfType([N.string,N.func,N.arrayOf(N.string)]),sortOptions:N.exact({descending:N.bool}),addOptions:N.exact({show:N.bool}),onSend:N.func,onDragStart:N.func,onDragEnd:N.func,onFilter:N.func,onSort:N.func,onMount:N.func,onUnmount:N.func,forceSync:N.bool,dragFixed:N.bool,dragEnabled:N.bool,instantLayout:N.bool},Me.defaultProps={gridProps:{},addOptions:{show:!0},sortOptions:{descending:!1},forceSync:!1,dragFixed:!1,dragEnabled:!1,instantLayout:!1},Me.displayName="GridComponent";var Ge=function(){function e(){Z(this,e),o(this,"_idMap",new Map),o(this,"_groupMap",new Map)}return Q(e,[{key:"get",value:function(e){return this._idMap.get(e)||null}},{key:"getGroup",value:function(e){var t=this._groupMap.get(e);if(t)return t;var n=[];return this._groupMap.set(e,n),n}},{key:"getAll",value:function(){return Array.from(this._idMap.values())}},{key:"set",value:function(e,t){return this._idMap.set(t,e),this}},{key:"setGroup",value:function(e,t){var n=this._groupMap.get(t);return n?n.push(e):this._groupMap.set(t,[e]),this}},{key:"delete",value:function(e){return this._idMap.delete(e),this}},{key:"deleteGroup",value:function(e,t){var n=this._groupMap.get(t);if(n){var r=n.indexOf(e);r>-1&&n.splice(r,1)}return this}},{key:"clear",value:function(){return this._idMap.clear(),this._groupMap.clear(),this}}]),e}(),He=new Ge;function $e(e,t){e&&("function"==typeof e?e(t):"current"in e&&(e.current=t))}function qe(e){return e instanceof HTMLElement||e instanceof window.constructor}function Le(e){var n=function(e){return"function"==typeof e?e:function(n,r){return t.ItemDrag.defaultStartPredicate(n,r,e)}}(e.dragStartPredicate);e.dragStartPredicate=function(e,t){return!!l(e.getGrid()).dragEnabled&&((!a(e)||!1!==l(e).draggable)&&n(e,t))}}function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ne=n.forwardRef((function(e,o){var i,a,s,l=e.children,f=e.id,p=e.groupIds,g=e.gridProps,h=e.filter,m=e.sort,y=e.sortOptions,v=e.addOptions,b=e.propsToData,C=e.onSend,O=e.onDragStart,_=e.onDragEnd,S=e.onFilter,w=e.onSort,R=e.onMount,T=e.onUnmount,E=e.forceSync,P=e.dragFixed,I=e.dragEnabled,j=e.instantLayout,D=Fe(e,["children","id","groupIds","gridProps","filter","sort","sortOptions","addOptions","propsToData","onSend","onDragStart","onDragEnd","onFilter","onSort","onMount","onUnmount","forceSync","dragFixed","dragEnabled","instantLayout"]),x=Ee((function(){D.items=[],D.dragEnabled=null!==I,function(e){var t=e.dragContainer,n={current:null};Object.defineProperty(e,"dragContainer",{get:function(){return n.current},set:function(e){!e||e instanceof Element?n.current=e:n=e}}),e.dragContainer=t}(D),function(e,t){var n=e.dragSort;if(n&&"object"===d(n)){le("string"==typeof n.groupId);var r=t.getGroup(n.groupId);e.dragSort=function(){return r}}}(D,He),function(e){var t=e.dragAutoScroll;t&&Array.isArray(t.targets)&&t.targets.forEach((function(e){if(!qe(e)){le("element"in e);var t=e.element,n={current:null};Object.defineProperty(e,"element",{get:function(){return n.current},set:function(e){qe(e)?n.current=e:n=e}}),e.element=t}}))}(D),Le(D);var e=function(e){var n=document.createElement("div");n.style.display="none",document.body.appendChild(n);var r=new t(n,e);return document.body.removeChild(n),r}(D);return f&&He.set(e,f),u(e,{id:f}),$e(o,e),e}));return n.useEffect((function(){return function(){$e(o,null),c(x),f&&He.delete(f),x.destroy()}}),[]),i=function(){return u(x,{groupIds:p}),p&&p.forEach((function(e){He.setGroup(x,e)})),function(){p&&p.forEach((function(e){He.deleteGroup(x,e)}))}},a=Te(p||[]),s=n.useRef(),a&&(s.current&&s.current(),s.current=i()),n.useEffect((function(){return function(){s.current&&s.current()}}),[]),r.createElement(Me,{grid:x,gridProps:g,filter:h,sort:m,sortOptions:y,addOptions:v,propsToData:b,onSend:C,onDragStart:O,onDragEnd:_,onFilter:S,onSort:w,onMount:R,onUnmount:T,forceSync:E,dragFixed:P,dragEnabled:I,instantLayout:j},l)}));function Ve(e,t){var n=Y().itemRefController;le(void 0!==n);var r=Re((function(e,t){if(le("object"===d(e),"The data must be an object, founded: ".concat(d(e))),(t=t||Ve.defaultOptions).merge){var r=n.get("data")||{};n.set("data",Object.assign(r,e))}else n.set("data",e)}));return"object"===d(e)&&r(e,t),r}function Ue(){var e=Y().eventController,t=Pe();return le(void 0!==e),n.useEffect((function(){e.enableEvent("drag",t)}),[e,t]),e.getPayload("drag")||!1}function We(){var e=Y().itemRefController;return le(void 0!==e),Re((function(t){e.set("draggable",!!t)}))}function Be(){var e=Y().eventController,t=W(),r=Pe();le(void 0!==e&&void 0!==t.grid);var o=e.getPayload("send")||t.grid;return n.useEffect((function(){e.enableEvent("send",r)}),[e,r]),{id:o._component.id,groupIds:o._component.groupIds,grid:o}}function Ke(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=W(),r=t.layoutController,o=Y(),i=o.itemRefController;le(void 0!==i&&void 0!==r);var a=n.useCallback((function(){if(i.hasItem()){var e=i.getItem();r.refreshItem(e)}}),[r,i]);return n.useEffect((function(){a()}),e.concat(a)),a}function Ye(){var e=Y().eventController,t=Pe();return le(void 0!==e),n.useEffect((function(){e.enableEvent("show",t)}),[e,t]),e.getPayload("show")}function Ze(){var e=W().layoutController,t=Y(),n=t.eventController,r=t.itemRefController;return le(void 0!==r&&void 0!==e&&void 0!==n),Re((function(t,o){r.hasItem()&&!!t!==n.getPayload("show")&&(o=o||Ze.defaultOptions,e.setItemVisibility(r.getItem(),t,!0===o.instant))}))}Ne.propTypes={id:N.string,groupIds:N.arrayOf(N.string.isRequired),showDuration:N.number,showEasing:N.string,hideDuration:N.number,hideEasing:N.string,visibleStyles:N.shape({}),hiddenStyles:N.shape({}),layout:N.oneOfType([N.func,N.exact({fillGaps:N.bool,horizontal:N.bool,alignRight:N.bool,alignBottom:N.bool,rounding:N.bool})]),layoutOnResize:N.oneOfType([N.bool,N.number]),layoutDuration:N.number,layoutEasing:N.string,dragContainer:N.oneOfType([N.instanceOf(HTMLElement),N.shape({current:N.instanceOf(HTMLElement).isRequired})]),dragStartPredicate:N.oneOfType([N.func,N.exact({distance:N.number,delay:N.number,handle:N.oneOfType([N.string,N.bool])})]),dragAxis:N.oneOf(["x","y","xy"]),dragSort:N.oneOfType([N.bool,N.func,N.exact({groupId:N.string.isRequired})]),dragSortHeuristics:N.exact({sortInterval:N.number,minDragDistance:N.number,minBounceBackAngle:N.number}),dragSortPredicate:N.oneOfType([N.func,N.exact({action:N.oneOf(["move","swap"]),migrateAction:N.oneOf(["move","swap"]),threshold:N.number})]),dragRelease:N.exact({duration:N.number,easing:N.string,useDragContainer:N.bool}),dragCssProps:N.exact({touchAction:N.string,userSelect:N.string,userDrag:N.string,tapHighlightColor:N.string,touchCallout:N.string,contentZooming:N.string}),dragPlaceholder:N.exact({enabled:N.bool,createElement:N.func,onCreate:N.func,onRemove:N.func,easing:N.string,duration:N.number}),containerClass:N.string,itemClass:N.string,itemVisibleClass:N.string,itemHiddenClass:N.string,itemPositioningClass:N.string,itemDraggingClass:N.string,itemReleasingClass:N.string,itemPlaceholderClass:N.string},Ne.defaultProps=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.defaultOptions,{dragEnabled:null}),Ne.displayName="MuuriComponent",Ve.defaultOptions={merge:!1},Ze.defaultOptions={instant:!1};var Je=Object.freeze({__proto__:null,useData:Ve,useDrag:Ue,useDraggable:We,useGrid:Be,useRefresh:Ke,useShow:Ye,useVisibility:Ze});function Qe(e){le("object"===d(e)),le("number"==typeof e.columns&&e.columns>0&&e.columns<=1),le("number"==typeof e.ratio||"number"==typeof e.height||"string"==typeof e.height),le("number"!=typeof e.ratio||"number"!=typeof e.height&&"string"!=typeof e.height);var t,n=function(e){"number"==typeof e&&(e="".concat(e,"px"));var t=e.trim().split(" "),n="0px",r="0px",o=0,i=0;1===t.length?n=r=t[0]:2===t.length||3===t.length?n=r=t[1]:4===t.length&&(n=t[3],r=t[1]);-1===n.indexOf("%")?i+=parseFloat(n):o+=parseFloat(n);-1===r.indexOf("%")?i+=parseFloat(r):o+=parseFloat(r);return{margin:e,mStatic:i,mDynamic:o}}(e.margin||"0px"),r=n.margin,o=n.mStatic,i=n.mDynamic,a=function(e,t,n){var r=0!==t,o=100*e-n,i=r?"".concat(o,"% - ").concat(t,"px"):"".concat(o,"%");return{needCalc:r,width:i}}(e.columns,o,i),s=a.needCalc,u=a.width;return e.ratio?{width:s?"calc(".concat(u,")"):u,paddingTop:Xe(u,e.ratio,s),height:"0px",borderWidth:"0px",margin:r}:{width:s?"calc(".concat(u,")"):u,paddingTop:"0px",height:(t=e.height,"number"==typeof t?"".concat(t,"px"):t),borderWidth:"0px",margin:r}}function Xe(e,t,n){return n?"calc((".concat(e,") / ").concat(t,")"):"".concat(parseFloat(e)/t,"%")}function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tt(e,t){if(e){if("string"==typeof e)return et(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?et(e,t):void 0}}function nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}}(e,t)||tt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(e){return function(e){if(Array.isArray(e))return et(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||tt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ot=["useData","useDrag","useDraggable","useGrid","useRefresh","useShow","useVisibility"],it=[["useData",at("setData")],["useDrag",at("isDragging")],["useDraggable",at("setDraggable")],["useGrid",at("gridData")],["useRefresh",at("refresh")],["useShow",at("isShowing")],["useVisibility",at("setVisibility")]];function at(e){return function(t){return o({},e,t)}}var st=t.AutoScroller,ut=t.ItemDrag;e.AutoScroller=st,e.ChildrenController=Ce,e.EventController=X,e.FiberController=pe,e.FlagProp=ge,e.GridComponent=Me,e.GridContext=V,e.GridProvider=U,e.ItemAddController=ee,e.ItemComponent=Ie,e.ItemContext=B,e.ItemDrag=ut,e.ItemProvider=K,e.ItemRefController=ce,e.ItemRemoveController=fe,e.LayoutController=de,e.MuuriComponent=Ne,e.MuuriMap=Ge,e.getHandler=at,e.getIndicesToAdd=Oe,e.getResponsiveStyle=Qe,e.getStaticStyle=function(e){var t=Qe(e);le("grid"in e);var n=e.grid.getSizerElement();Object.assign(n.style,t);var r=window.getComputedStyle(n);return{width:r.width,height:r.height,paddingTop:r.paddingTop,margin:r.margin}},e.muuriMap=He,e.useData=Ve,e.useDrag=Ue,e.useDraggable=We,e.useGrid=Be,e.useGridContext=W,e.useItemContext=Y,e.useRefresh=Ke,e.useShow=Ye,e.useVisibility=Ze,e.withHooks=function(e,t){le(Array.isArray(t)),t.forEach((function(e){le(ot.includes(e))})),le(0!==t.length);var n=it.filter((function(e){var n=nt(e,1)[0];return t.includes(n)}));return function(t){return r.createElement(e,f({},t,function(e){return Object.assign.apply(Object,[{}].concat(rt(e.map((function(e){var t=nt(e,2),n=t[0];return(0,t[1])(Je[n]())})))))}(n)))}},Object.defineProperty(e,"__esModule",{value:!0})}));
