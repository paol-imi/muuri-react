/**
* Muuri-react v3.1.6
* https://paol-imi.github.io/muuri-react
* Copyright (c) 2020-present, Paol-imi
* Released under the MIT license
* https://github.com/Paol-imi/muuri-react/blob/master/LICENSE
* @license MIT
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("muuri"),require("react")):"function"==typeof define&&define.amd?define(["exports","muuri","react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).MuuriReact={},e.Muuri,e.React)}(this,(function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=r(t),i=r(n);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:String(t)}function s(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l="_component";function c(e){return!!e[l]}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e,t){c(e)?Object.assign(e[l],t):e[l]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t)}function p(e){return e[l]}function g(e){e._component=null}function h(){return(h=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){return e(t={exports:{}},t.exports),t.exports
/** @license React v16.13.1
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   */}o.default.prototype.getId=function(){return p(this).id},o.default.prototype.getGroupIds=function(){return p(this).groupIds},o.default.prototype.getSizerElement=function(){return p(this).sizerElement},o.default.Item.prototype.getKey=function(){return p(this).key},o.default.Item.prototype.getProps=function(){return p(this).props},o.default.Item.prototype.getData=function(){return p(this).data},o.default.Item.prototype.setData=function(e){p(this).data=e};var y="function"==typeof Symbol&&Symbol.for,v=y?Symbol.for("react.element"):60103,b=y?Symbol.for("react.portal"):60106,C=y?Symbol.for("react.fragment"):60107,O=y?Symbol.for("react.strict_mode"):60108,_=y?Symbol.for("react.profiler"):60114,S=y?Symbol.for("react.provider"):60109,w=y?Symbol.for("react.context"):60110,T=y?Symbol.for("react.async_mode"):60111,R=y?Symbol.for("react.concurrent_mode"):60111,E=y?Symbol.for("react.forward_ref"):60112,P=y?Symbol.for("react.suspense"):60113,I=y?Symbol.for("react.suspense_list"):60120,j=y?Symbol.for("react.memo"):60115,D=y?Symbol.for("react.lazy"):60116,x=y?Symbol.for("react.block"):60121,k=y?Symbol.for("react.fundamental"):60117,A=y?Symbol.for("react.responder"):60118,M=y?Symbol.for("react.scope"):60119;function F(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case v:switch(e=e.type){case T:case R:case C:case _:case O:case P:return e;default:switch(e=e&&e.$$typeof){case w:case E:case D:case j:case S:return e;default:return t}}case b:return t}}}function G(e){return F(e)===R}var H={AsyncMode:T,ConcurrentMode:R,ContextConsumer:w,ContextProvider:S,Element:v,ForwardRef:E,Fragment:C,Lazy:D,Memo:j,Portal:b,Profiler:_,StrictMode:O,Suspense:P,isAsyncMode:function(e){return G(e)||F(e)===T},isConcurrentMode:G,isContextConsumer:function(e){return F(e)===w},isContextProvider:function(e){return F(e)===S},isElement:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===v},isForwardRef:function(e){return F(e)===E},isFragment:function(e){return F(e)===C},isLazy:function(e){return F(e)===D},isMemo:function(e){return F(e)===j},isPortal:function(e){return F(e)===b},isProfiler:function(e){return F(e)===_},isStrictMode:function(e){return F(e)===O},isSuspense:function(e){return F(e)===P},isValidElementType:function(e){return"string"==typeof e||"function"==typeof e||e===C||e===R||e===_||e===O||e===P||e===I||"object"==typeof e&&null!==e&&(e.$$typeof===D||e.$$typeof===j||e.$$typeof===S||e.$$typeof===w||e.$$typeof===E||e.$$typeof===k||e.$$typeof===A||e.$$typeof===M||e.$$typeof===x)},typeOf:F},$=m((function(e,t){}));$.AsyncMode,$.ConcurrentMode,$.ContextConsumer,$.ContextProvider,$.Element,$.ForwardRef,$.Fragment,$.Lazy,$.Memo,$.Portal,$.Profiler,$.StrictMode,$.Suspense,$.isAsyncMode,$.isConcurrentMode,$.isContextConsumer,$.isContextProvider,$.isElement,$.isForwardRef,$.isFragment,$.isLazy,$.isMemo,$.isPortal,$.isProfiler,$.isStrictMode,$.isSuspense,$.isValidElementType,$.typeOf,m((function(e){e.exports=H}));function q(){}function L(){}L.resetWarningCache=q;var z=function(){function e(e,t,n,r,o,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:L,resetWarningCache:q};return n.PropTypes=n,n},N=m((function(e){e.exports=z()})),V=n.createContext({}),U=V.Provider,B=function(){return n.useContext(V)};V.displayName="GridProvider";var W=n.createContext({}),K=W.Provider,Y=function(){return n.useContext(W)};function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function Q(e,t,n){return t&&J(e.prototype,t),n&&J(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}W.displayName="ItemProvider";var X=function(){function e(){Z(this,e),s(this,"_eventsMap",new Map),s(this,"_payloadsMap",new Map)}return Q(e,[{key:"enableEvent",value:function(e,t){this._eventsMap.set(e,t)}},{key:"emitEvent",value:function(e,t){this.isEnabled(e)&&(this._payloadsMap.set(e,t),this._eventsMap.get(e)())}},{key:"getPayload",value:function(e){return this._payloadsMap.get(e)}},{key:"isEnabled",value:function(e){return this._eventsMap.has(e)}},{key:"destroy",value:function(){this._eventsMap.clear(),this._payloadsMap.clear()}}]),e}(),ee=function(){function e(){Z(this,e),s(this,"_requests",[])}return Q(e,[{key:"useInit",value:function(){this._requests=[]}},{key:"emit",value:function(e){for(var t=0;t<this._requests.length;t++)this._requests[t](e[t])}},{key:"requestItem",value:function(e){this._requests.push(e)}},{key:"destroy",value:function(){this._requests=[]}}]),e}();function te(e,t){return(te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ne(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oe(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ie(e,t,n){return(ie=oe()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&te(o,n.prototype),o}).apply(null,arguments)}function ae(e){var t="function"==typeof Map?new Map:void 0;return(ae=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return ie(e,arguments,re(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),te(r,e)})(e)}function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=re(e);if(t){var o=re(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ne(this,n)}}var se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&te(e,t)}(n,e);var t=ue(n);function n(e){var r;return Z(this,n),(r=t.call(this,e)).name="Invariant",r}return Q(n)}(ae(Error));function le(e,t){if(!e)throw new se("Invariant failed")}var ce=function(){function e(){Z(this,e),s(this,"_item",null),s(this,"_instance",{})}return Q(e,[{key:"set",value:function(e,t){this._item?d(this._item,s({},e,t)):this._instance[e]=t}},{key:"get",value:function(e){return this._item?p(this._item)[e]:this._instance[e]}},{key:"delete",value:function(){this._item&&g(this._item)}},{key:"setItem",value:function(e){this._item=e,d(this._item,this._instance),this._instance={}}},{key:"getItem",value:function(){return le(null!==this._item),this._item}},{key:"hasItem",value:function(){return null!==this._item}},{key:"destroy",value:function(){this._item=null,this._instance={}}}]),e}(),fe=function(){function e(){Z(this,e),s(this,"_itemsToRemove",[])}return Q(e,[{key:"useInit",value:function(){this._itemsToRemove=[]}},{key:"removeItem",value:function(e){this._itemsToRemove.push(e)}},{key:"getItemsToRemove",value:function(){return this._itemsToRemove}},{key:"destroy",value:function(){this._itemsToRemove=[]}}]),e}(),de=function(){function e(){Z(this,e),s(this,"_itemsToRefresh",void 0),s(this,"_itemsToShow",void 0),s(this,"_itemsToHide",void 0),s(this,"_isRendering",void 0),this._itemsToRefresh=[],this._itemsToShow=[],this._itemsToHide=[],this._isRendering=!1}return Q(e,[{key:"useInit",value:function(){var e=this;this._itemsToRefresh=[],this._itemsToShow=[],this._itemsToHide=[],this._isRendering=!0,n.useEffect((function(){e._isRendering=!1}))}},{key:"refreshItem",value:function(e){if(this._isRendering)this._itemsToRefresh.push(e);else{var t=e.getGrid();t.refreshItems([e]),t.layout()}}},{key:"setItemVisibility",value:function(e,t,n){if(this._isRendering)t?this._itemsToShow.push(e):this._itemsToHide.push(e);else{var r=e.getGrid();t?r.show([e],{instant:n}):r.hide([e],{instant:n})}}},{key:"getItemsToRefresh",value:function(){return this._itemsToRefresh}},{key:"getItemsToShow",value:function(){return this._itemsToShow}},{key:"getItemsToHide",value:function(){return this._itemsToHide}},{key:"destroy",value:function(){this._itemsToRefresh=[],this._itemsToShow=[],this._itemsToHide=[]}}]),e}(),pe=function(){function e(){Z(this,e),s(this,"_fiber",void 0),s(this,"_flag","0")}return Q(e,[{key:"useInit",value:function(e){var t=this;this.updateFlag(),n.useEffect((function(){le(null!==e.current),t._fiber=function(e){var t=Object.keys(e).find((function(e){return e.startsWith("__reactInternalInstance$")||e.startsWith("__reactFiber$")}));return le("string"==typeof t),e[t]}(e.current)}),[])}},{key:"getStateNodes",value:function(e){var t=[];if(0===e.length)return t;var n=he(this._fiber,this._flag).child;return e.forEach((function(e){for(;n.index!==e;)n=n.sibling;t.push(function(e){var t=e.child.child;for(;!(t.stateNode instanceof HTMLElement);)t=t.child;return t.stateNode}(n))})),t}},{key:"append",value:function(e){var t=he(this._fiber,this._flag);me(t,e),t.alternate&&e.alternate&&me(t.alternate,e.alternate)}},{key:"remove",value:function(e){var t=he(this._fiber,this._flag),n=ye(t,e);return t.alternate&&n.alternate&&ye(t.alternate,e),n}},{key:"getFlagProp",value:function(){return s({},ge,this._flag)}},{key:"updateFlag",value:function(){"0"===this._flag?this._flag="1":this._flag="0"}},{key:"destroy",value:function(){this._fiber=null}}]),e}(),ge="muuri-react-flag";function he(e,t){if(!e.alternate)return e;var n=e.memoizedProps[ge];if(n===e.alternate.memoizedProps[ge]){for(var r=e;r.return;)r=r.return;return r.stateNode.current===r?e:e.alternate}return n===t?e:e.alternate}function me(e,t){var n;if(e.child){for(var r=e.child;r.sibling;)r=r.sibling;t.index=r.index+1,r.sibling=t}else e.child=t,t.index=0;t.return=e,t._debugOwner&&(t._debugOwner=null===(n=e.return)||void 0===n?void 0:n.return)}function ye(e,t){var n,r,o,i=e.child;if(be(i,t)){for(;be(i.sibling,t);)i=i.sibling;o=(r=i).sibling,r.sibling=r.sibling.sibling,n=o,ve(i)}else n=function(e){var t=e.child;return e.child=e.child.sibling,t}(e),(i=i.sibling)&&ve(i);return n.sibling=null,n}function ve(e){for(;e.sibling;)e.sibling.index=e.index+1,e=e.sibling}function be(e,t){return e.child.child.key!==t}var Ce=function(){function e(){Z(this,e),s(this,"_oldChildrenArray",[]),s(this,"_children",[]),s(this,"_indicesToAdd",[]),s(this,"_dragCounter",0)}return Q(e,[{key:"useInit",value:function(e){var t=n.Children.toArray(e);this._indicesToAdd=Oe(t,this._oldChildrenArray),this._children=e||[],this._oldChildrenArray=t}},{key:"remove",value:function(e){return this._oldChildrenArray.splice(e,1)[0]}},{key:"append",value:function(e){this._oldChildrenArray.push(e)}},{key:"getIndicesToAdd",value:function(){return this._indicesToAdd}},{key:"render",value:function(e){var t=n.Children.map(this._children,(function(t){return e(t,t.key)}));return this.flush(),t}},{key:"incrementDragCounter",value:function(){this._dragCounter+=1}},{key:"decrementDragCounter",value:function(){this._dragCounter-=1}},{key:"flush",value:function(){this._children=[]}},{key:"destroy",value:function(){this.flush()}}]),e}();function Oe(e,t){for(var n=[],r=0,o=0;o<e.length;o++){var i=_e(t,e[o],r);-1===i?n.push(o):r=i}return n}function _e(e,t,n){for(var r=n=n>e.length?e.length:n;r<e.length;r++)if(Se(t,e[r]))return r;for(var o=0;o<n;o++)if(Se(t,e[o]))return o;return-1}function Se(e,t){return e.key===t.key}var we=["relative","absolute","fixed"];function Te(e){return n.useRef(e).current}function Re(e){var t=n.useRef(e);if(t.current===e)return!0;var r=function(e,t){if(e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!0;return!1}(t.current,e);return t.current=e,r}function Ee(e){var t=n.useRef();return t.current||(t.current=e()),t.current}function Pe(){var e=n.useState()[1];return Te((function(){e(Object.create(null))}))}function Ie(e){var t=e.children,r=e.itemClasses,o=e.itemAddController,u=e.itemRemoveController,s=e.propsToData,l=e.itemKey,c=e.grid,f=Ee((function(){var e=new X,t=new ce;return t.set("key",l),t.set("eventController",e),{eventController:e,itemRefController:t,itemRemoveController:u,grid:c}}));if(f.itemRefController.set("props",t.props),f.itemRemoveController=u,f.grid=c,s){var p=s(t.props);le("object"===a(p),"The data returned by 'propsToData' must be an object, founded ".concat(a(p))),f.itemRefController.set("data",p)}return n.useEffect((function(){return o.requestItem((function(e){!function(e){d(e,{props:{},data:{}}),Object.defineProperty(e,"_sortData",{get:function(){return this.getData()},set:function(){}})}(e),function(e,t){e.style.position="absolute";var n=e.setAttribute.bind(e);e.setAttribute=function(r,o){if("class"===r){var i=(e.getAttribute("class")||"").split(" ").filter((function(e){return t.includes(e)}));o="".concat(o," ").concat(i.join(" "))}n(r,o)}}(e.getElement(),r),f.itemRefController.setItem(e)})),function(){var e=f.itemRefController.getItem();le(null!==e);var t=e.getElement();le(void 0!==t),e.isDragging()&&(t.style.display="none",t.style.visibility="hidden",e._drag&&e._drag.destroy(),f.grid.getElement().appendChild(t)),f.itemRefController.delete(),f.itemRemoveController.removeItem(e),f.itemRefController.destroy(),f.eventController.destroy()}}),[]),i.default.createElement(K,{value:f},t)}Ie.propTypes={itemAddController:N.object.isRequired,itemClasses:N.arrayOf(N.string.isRequired).isRequired,propsToData:N.func,children:N.element.isRequired,grid:N.instanceOf(o.default).isRequired},Ie.displayName="ItemComponent";function je(e){return e._settings.containerClass}var De=["itemClass","itemVisibleClass","itemHiddenClass","itemPositioningClass","itemDraggingClass","itemReleasingClass","itemPlaceholderClass"];function xe(e){return De.map((function(t){return e._settings[t]}))}function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Me(e,t,n){n=Ae(Ae({},n||{}),{},{layout:!1}),"function"==typeof t&&function(e,t,n){e.sort((function(e,n){return t(e.getData(),n.getData(),e,n)}),n)}(e,t,n),"string"==typeof t&&function(e,t,n){e.sort(t,n)}(e,t,n),Array.isArray(t)&&function(e,t,n){var r=e.getItems(),o=[],i=[];r.forEach((function(e){var n=e._component.key,r=t.findIndex((function(e){return e===n}));r>-1?o[r]=e:i.push(e)})),e.sort(Array.prototype.concat(o.filter((function(e){return!!e})),i),n)}(e,t,n)}function Fe(e){var t=e.children,r=e.gridProps,o=e.grid,u=e.filter,s=e.sort,l=e.sortOptions,f=e.addOptions,g=e.propsToData,m=e.onSend,y=e.onDragStart,v=e.onDragEnd,b=e.onFilter,C=e.onSort,O=e.onMount,_=e.onUnmount,S=e.forceSync,w=e.dragFixed,T=e.dragEnabled,R=e.instantLayout,E=Ee((function(){return{gridRef:n.createRef(),gridClass:je(o),itemClasses:xe(o),childrenController:new Ce,fiberController:new pe,itemAddController:new ee,itemRemoveController:new fe,layoutController:new de,onUnmount:_,onDragStart:y,onDragEnd:v,onFilter:b,onSort:C,onSend:m}})),P={indicesToAdd:[],addedDOMItems:[],itemsToRemove:[],itemsToRefresh:[],itemsToShow:[],itemsToHide:[],hasAdded:!1,hasRemoved:!1,hasFiltered:!1,hasSorted:!1,hasRefreshed:!1,hasShown:!1,hasHidden:!1};n.useEffect((function(){return o.on("beforeSend",(function(e){var t=e.item,n=e.fromGrid,r=e.fromIndex;p(t).sentPayload||d(t,{sentPayload:{fromChildrenController:E.childrenController,fromFiberController:E.fiberController,fromGrid:n,fromIndex:r}})})).on("receive",(function(e){var t=e.item,n=e.toGrid,r=e.toIndex,i=E.childrenController,u=E.fiberController;if(t.isDragging()){d(t,{receivedPayload:{toChildrenController:i,toFiberController:u,toGrid:n,toIndex:r}})}else{var s=p(t).sentPayload;le(null!==s&&"object"===a(s));var l=s.fromChildrenController,c=s.fromFiberController;d(t,{sentPayload:null});var f=c.remove(t.getKey()),g=l.remove(f.index);u.append(f),i.append(g)}p(t).eventController.emitEvent("send",o)})).on("dragInit",(function(e,t){E.childrenController.incrementDragCounter(),p(e).eventController.emitEvent("drag",!0),E.onDragStart&&E.onDragStart(e,t)})).on("dragEnd",(function(e){var t=p(e).sentPayload,n=p(e).receivedPayload;if(t&&n){var r=t.fromChildrenController,o=t.fromFiberController,i=t.fromGrid,a=t.fromIndex,u=n.toChildrenController,s=n.toFiberController,l=n.toGrid,c=n.toIndex;if(d(e,{sentPayload:null,receivedPayload:null}),i!==l){le("function"==typeof E.onSend);var f=o.remove(e.getKey()),g=r.remove(f.index);s.append(f),u.append(g),E.onSend({key:p(e).key,fromGrid:i,fromIndex:a,fromId:p(i).id,fromGroupIds:p(i).groupIds,toGrid:l,toIndex:c,toId:p(l).id,toGroupIds:p(l).groupIds})}}})).on("dragReleaseEnd",(function(e){E.childrenController.decrementDragCounter(),p(e).eventController.emitEvent("drag",!1),E.onDragEnd&&E.onDragEnd(e)})).on("showStart",(function(e){c(e[0])&&e.forEach((function(e){var t=p(e).eventController;!0!==t.getPayload("show")&&t.emitEvent("show",!0)}))})).on("hideEnd",(function(e){e.forEach((function(e){var t=p(e).eventController;!1!==t.getPayload("show")&&t.emitEvent("show",!1)}))})).on("filter",(function(e,t){E.onFilter&&E.onFilter(e,t)})).on("sort",(function(e,t){E.onSort&&E.onSort(e,t)})),w&&o.on("dragInit",(function(e){var t=e.getElement();le(void 0!==t);var n=getComputedStyle(t),r=n.width,o=n.height,i=n.paddingTop;d(e,{dragWidth:t.style.width,dragHeight:t.style.height,dragPaddingTop:t.style.paddingTop}),t.style.width=r,t.style.height=o,t.style.paddingTop=i})).on("dragReleaseEnd",(function(e){var t=e.getElement();le(void 0!==t);var n=p(e),r=n.dragWidth,o=n.dragHeight,i=n.dragPaddingTop;t.style.width=r,t.style.height=o,t.style.paddingTop=i})),le(null!==E.gridRef.current),o._element=E.gridRef.current,function(e,t){var n=getComputedStyle(e).position;we.includes(n)||(e.style.position=we[0]),e.classList.add(t);var r=e.setAttribute.bind(e);e.setAttribute=function(n,o){"class"===n&&((e.getAttribute("class")||"").split(" ").includes(t)||(o="".concat(o," ").concat(t)));r(n,o)}}(E.gridRef.current,E.gridClass),function(e){var t=document.createElement("div");t.style.visibility="hidden",t.style.position="absolute",t.classList.add("grid-sizer"),d(e,{sizerElement:t});var n=e.getElement();0===n.children.length?n.appendChild(t):n.insertBefore(t,n.children[0])}(o),O&&O(o),function(){E.childrenController.destroy(),E.fiberController.destroy(),E.itemRemoveController.destroy(),E.itemAddController.destroy(),E.layoutController.destroy()}}),[]),E.childrenController.useInit(t),E.fiberController.useInit(E.gridRef),E.itemRemoveController.useInit(),E.itemAddController.useInit(),E.layoutController.useInit();var I=Re([u]),j=Re([s,l]);n.useEffect((function(){d(o,{dragEnabled:T}),P.indicesToAdd=E.childrenController.getIndicesToAdd(),P.addedDOMItems=E.fiberController.getStateNodes(P.indicesToAdd),P.itemsToRemove=E.itemRemoveController.getItemsToRemove(),P.itemsToRefresh=E.layoutController.getItemsToRefresh(),P.itemsToShow=E.layoutController.getItemsToShow(),P.itemsToHide=E.layoutController.getItemsToHide(),E.onUnmount=_,E.onDragStart=y,E.onDragEnd=v,E.onFilter=b,E.onSort=C,E.onSend=m})),n.useEffect((function(){if(P.itemsToRemove.length&&(!function(e,t){e.remove(t,{layout:!1,removeElements:!1})}(o,P.itemsToRemove),P.hasRemoved=!0),P.indicesToAdd.length){!function(e,t,n,r,o){for(var i=0;i<t.length;i++)e.add(t[i],{index:n[i],layout:!1});!o&&null!=r&&r.show&&e.show(e.getItems(n),{layout:!1})}(o,P.addedDOMItems,P.indicesToAdd,f,u);var e=o.getItems(P.indicesToAdd);E.itemAddController.emit(e),P.hasAdded=!0}u&&(I||P.hasAdded||S)&&(!function(e,t){e.filter((function(e){return t(e.getData(),e)}),{layout:!1})}(o,u),P.hasFiltered=!0),s&&(j||P.hasAdded||S)&&(Me(o,s,l),P.hasSorted=!0),!u&&P.itemsToShow.length&&(!function(e,t){e.show(t,{layout:!1})}(o,P.itemsToShow),P.hasShown=!0),!u&&P.itemsToHide.length&&(!function(e,t){e.hide(t,{layout:!1})}(o,P.itemsToHide),P.hasHidden=!0),P.itemsToRefresh.length&&(o.refreshItems(P.itemsToRefresh),P.hasRefreshed=!0),(P.hasAdded||P.hasRemoved||P.hasSorted||P.hasFiltered||P.hasRefreshed||P.hasShown||P.hasHidden)&&o.layout(R)}));var D=Ee((function(){return{layoutController:E.layoutController,grid:o}}));return i.default.createElement(U,{value:D},i.default.createElement("div",h({},r,{ref:E.gridRef},E.fiberController.getFlagProp()),E.childrenController.render((function(e,t){return i.default.createElement(Ie,{key:t,itemKey:t,grid:o,propsToData:g,itemClasses:E.itemClasses,itemAddController:E.itemAddController,itemRemoveController:E.itemRemoveController},e)}))))}function Ge(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}Fe.propTypes={grid:N.object.isRequired,gridProps:N.object,filter:N.oneOfType([N.string,N.func]),sort:N.oneOfType([N.string,N.func,N.arrayOf(N.string)]),sortOptions:N.exact({descending:N.bool}),addOptions:N.exact({show:N.bool}),onSend:N.func,onDragStart:N.func,onDragEnd:N.func,onFilter:N.func,onSort:N.func,onMount:N.func,onUnmount:N.func,forceSync:N.bool,dragFixed:N.bool,dragEnabled:N.bool,instantLayout:N.bool},Fe.defaultProps={gridProps:{},addOptions:{show:!0},sortOptions:{descending:!1},forceSync:!1,dragFixed:!1,dragEnabled:!1,instantLayout:!1},Fe.displayName="GridComponent";var He=function(){function e(){Z(this,e),s(this,"_idMap",new Map),s(this,"_groupMap",new Map)}return Q(e,[{key:"get",value:function(e){return this._idMap.get(e)||null}},{key:"getGroup",value:function(e){var t=this._groupMap.get(e);if(t)return t;var n=[];return this._groupMap.set(e,n),n}},{key:"getAll",value:function(){return Array.from(this._idMap.values())}},{key:"set",value:function(e,t){return this._idMap.set(t,e),this}},{key:"setGroup",value:function(e,t){var n=this._groupMap.get(t);return n?n.push(e):this._groupMap.set(t,[e]),this}},{key:"delete",value:function(e){return this._idMap.delete(e),this}},{key:"deleteGroup",value:function(e,t){var n=this._groupMap.get(t);if(n){var r=n.indexOf(e);r>-1&&n.splice(r,1)}return this}},{key:"clear",value:function(){return this._idMap.clear(),this._groupMap.clear(),this}}]),e}(),$e=new He;function qe(e,t){e&&("function"==typeof e?e(t):"current"in e&&(e.current=t))}function Le(e){return e instanceof HTMLElement||e instanceof window.constructor}function ze(e){var t=function(e){return"function"==typeof e?e:function(t,n){return o.default.ItemDrag.defaultStartPredicate(t,n,e)}}(e.dragStartPredicate);e.dragStartPredicate=function(e,n){return!!p(e.getGrid()).dragEnabled&&((!c(e)||!1!==p(e).draggable)&&t(e,n))}}var Ne=["children","id","groupIds","gridProps","filter","sort","sortOptions","addOptions","propsToData","onSend","onDragStart","onDragEnd","onFilter","onSort","onMount","onUnmount","forceSync","dragFixed","dragEnabled","instantLayout"];function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Be=n.forwardRef((function(e,t){var r,u,s,l=e.children,c=e.id,f=e.groupIds,p=e.gridProps,h=e.filter,m=e.sort,y=e.sortOptions,v=e.addOptions,b=e.propsToData,C=e.onSend,O=e.onDragStart,_=e.onDragEnd,S=e.onFilter,w=e.onSort,T=e.onMount,R=e.onUnmount,E=e.forceSync,P=e.dragFixed,I=e.dragEnabled,j=e.instantLayout,D=Ge(e,Ne),x=Ee((function(){D.items=[],D.dragEnabled=null!==I,function(e){var t=e.dragContainer,n={current:null};Object.defineProperty(e,"dragContainer",{get:function(){return n.current},set:function(e){!e||e instanceof Element?n.current=e:n=e}}),e.dragContainer=t}(D),function(e,t){var n=e.dragSort;if(n&&"object"===a(n)){le("string"==typeof n.groupId);var r=t.getGroup(n.groupId);e.dragSort=function(){return r}}}(D,$e),function(e){var t=e.dragAutoScroll;t&&Array.isArray(t.targets)&&t.targets.forEach((function(e){if(!Le(e)){le("element"in e);var t=e.element,n={current:null};Object.defineProperty(e,"element",{get:function(){return n.current},set:function(e){Le(e)?n.current=e:n=e}}),e.element=t}}))}(D),ze(D);var e=function(e){var t=document.createElement("div");t.style.display="none",document.body.appendChild(t);var n=new o.default(t,e);return document.body.removeChild(t),n}(D);return c&&$e.set(e,c),d(e,{id:c}),qe(t,e),e}));return n.useEffect((function(){return function(){qe(t,null),g(x),c&&$e.delete(c),x.destroy()}}),[]),r=function(){return d(x,{groupIds:f}),f&&f.forEach((function(e){$e.setGroup(x,e)})),function(){f&&f.forEach((function(e){$e.deleteGroup(x,e)}))}},u=Re(f||[]),s=n.useRef(),u&&(s.current&&s.current(),s.current=r()),n.useEffect((function(){return function(){s.current&&s.current()}}),[]),i.default.createElement(Fe,{grid:x,gridProps:p,filter:h,sort:m,sortOptions:y,addOptions:v,propsToData:b,onSend:C,onDragStart:O,onDragEnd:_,onFilter:S,onSort:w,onMount:T,onUnmount:R,forceSync:E,dragFixed:P,dragEnabled:I,instantLayout:j},l)}));function We(e,t){var n=Y().itemRefController;le(void 0!==n);var r=Te((function(e,t){if(le("object"===a(e),"The data must be an object, founded: ".concat(a(e))),(t=t||We.defaultOptions).merge){var r=n.get("data")||{};n.set("data",Object.assign(r,e))}else n.set("data",e)}));return"object"===a(e)&&r(e,t),r}function Ke(){var e=Y().eventController,t=Pe();return le(void 0!==e),n.useEffect((function(){e.enableEvent("drag",t)}),[e,t]),e.getPayload("drag")||!1}function Ye(){var e=Y().itemRefController;return le(void 0!==e),Te((function(t){e.set("draggable",!!t)}))}function Ze(){var e=Y().eventController,t=B(),r=Pe();le(void 0!==e&&void 0!==t.grid);var o=e.getPayload("send")||t.grid;return n.useEffect((function(){e.enableEvent("send",r)}),[e,r]),{id:o._component.id,groupIds:o._component.groupIds,grid:o}}function Je(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=B(),r=t.layoutController,o=Y(),i=o.itemRefController;le(void 0!==i&&void 0!==r);var a=n.useCallback((function(){if(i.hasItem()){var e=i.getItem();r.refreshItem(e)}}),[r,i]);return n.useEffect((function(){a()}),e.concat(a)),a}function Qe(){var e=Y().eventController,t=Pe();return le(void 0!==e),n.useEffect((function(){e.enableEvent("show",t)}),[e,t]),e.getPayload("show")}function Xe(){var e=B().layoutController,t=Y(),n=t.eventController,r=t.itemRefController;return le(void 0!==r&&void 0!==e&&void 0!==n),Te((function(t,o){r.hasItem()&&!!t!==n.getPayload("show")&&(o=o||Xe.defaultOptions,e.setItemVisibility(r.getItem(),t,!0===o.instant))}))}Be.propTypes={id:N.string,groupIds:N.arrayOf(N.string.isRequired),showDuration:N.number,showEasing:N.string,hideDuration:N.number,hideEasing:N.string,visibleStyles:N.shape({}),hiddenStyles:N.shape({}),layout:N.oneOfType([N.func,N.exact({fillGaps:N.bool,horizontal:N.bool,alignRight:N.bool,alignBottom:N.bool,rounding:N.bool})]),layoutOnResize:N.oneOfType([N.bool,N.number]),layoutDuration:N.number,layoutEasing:N.string,dragContainer:N.oneOfType([N.instanceOf(HTMLElement),N.shape({current:N.instanceOf(HTMLElement).isRequired})]),dragStartPredicate:N.oneOfType([N.func,N.exact({distance:N.number,delay:N.number,handle:N.oneOfType([N.string,N.bool])})]),dragAxis:N.oneOf(["x","y","xy"]),dragSort:N.oneOfType([N.bool,N.func,N.exact({groupId:N.string.isRequired})]),dragSortHeuristics:N.exact({sortInterval:N.number,minDragDistance:N.number,minBounceBackAngle:N.number}),dragSortPredicate:N.oneOfType([N.func,N.exact({action:N.oneOf(["move","swap"]),migrateAction:N.oneOf(["move","swap"]),threshold:N.number})]),dragRelease:N.exact({duration:N.number,easing:N.string,useDragContainer:N.bool}),dragCssProps:N.exact({touchAction:N.string,userSelect:N.string,userDrag:N.string,tapHighlightColor:N.string,touchCallout:N.string,contentZooming:N.string}),dragPlaceholder:N.exact({enabled:N.bool,createElement:N.func,onCreate:N.func,onRemove:N.func,easing:N.string,duration:N.number}),containerClass:N.string,itemClass:N.string,itemVisibleClass:N.string,itemHiddenClass:N.string,itemPositioningClass:N.string,itemDraggingClass:N.string,itemReleasingClass:N.string,itemPlaceholderClass:N.string},Be.defaultProps=Ue(Ue({},o.default.defaultOptions),{},{dragEnabled:null}),Be.displayName="MuuriComponent",We.defaultOptions={merge:!1},Xe.defaultOptions={instant:!1};var et=Object.freeze({__proto__:null,useData:We,useDrag:Ke,useDraggable:Ye,useGrid:Ze,useRefresh:Je,useShow:Qe,useVisibility:Xe});function tt(e){le("object"===a(e)),le("number"==typeof e.columns&&e.columns>0&&e.columns<=1),le("number"==typeof e.ratio||"number"==typeof e.height||"string"==typeof e.height),le("number"!=typeof e.ratio||"number"!=typeof e.height&&"string"!=typeof e.height);var t,n=function(e){"number"==typeof e&&(e="".concat(e,"px"));var t=e.trim().split(" "),n="0px",r="0px",o=0,i=0;1===t.length?n=r=t[0]:2===t.length||3===t.length?n=r=t[1]:4===t.length&&(n=t[3],r=t[1]);-1===n.indexOf("%")?i+=parseFloat(n):o+=parseFloat(n);-1===r.indexOf("%")?i+=parseFloat(r):o+=parseFloat(r);return{margin:e,mStatic:i,mDynamic:o}}(e.margin||"0px"),r=n.margin,o=n.mStatic,i=n.mDynamic,u=function(e,t,n){var r=0!==t,o=100*e-n,i=r?"".concat(o,"% - ").concat(t,"px"):"".concat(o,"%");return{needCalc:r,width:i}}(e.columns,o,i),s=u.needCalc,l=u.width;return e.ratio?{width:s?"calc(".concat(l,")"):l,paddingTop:nt(l,e.ratio,s),height:"0px",borderWidth:"0px",margin:r}:{width:s?"calc(".concat(l,")"):l,paddingTop:"0px",height:(t=e.height,"number"==typeof t?"".concat(t,"px"):t),borderWidth:"0px",margin:r}}function nt(e,t,n){return n?"calc((".concat(e,") / ").concat(t,")"):"".concat(parseFloat(e)/t,"%")}function rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ot(e,t){if(e){if("string"==typeof e)return rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rt(e,t):void 0}}function it(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){l=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(e,t)||ot(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(e){return function(e){if(Array.isArray(e))return rt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ot(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ut=["useData","useDrag","useDraggable","useGrid","useRefresh","useShow","useVisibility"],st=[["useData",lt("setData")],["useDrag",lt("isDragging")],["useDraggable",lt("setDraggable")],["useGrid",lt("gridData")],["useRefresh",lt("refresh")],["useShow",lt("isShowing")],["useVisibility",lt("setVisibility")]];function lt(e){return function(t){return s({},e,t)}}var ct=o.default.AutoScroller,ft=o.default.ItemDrag;e.AutoScroller=ct,e.ChildrenController=Ce,e.EventController=X,e.FiberController=pe,e.FlagProp=ge,e.GridComponent=Fe,e.GridContext=V,e.GridProvider=U,e.ItemAddController=ee,e.ItemComponent=Ie,e.ItemContext=W,e.ItemDrag=ft,e.ItemProvider=K,e.ItemRefController=ce,e.ItemRemoveController=fe,e.LayoutController=de,e.MuuriComponent=Be,e.MuuriMap=He,e.getHandler=lt,e.getIndicesToAdd=Oe,e.getResponsiveStyle=tt,e.getStaticStyle=function(e){var t=tt(e);le("grid"in e);var n=e.grid.getSizerElement();Object.assign(n.style,t);var r=window.getComputedStyle(n);return{width:r.width,height:r.height,paddingTop:r.paddingTop,margin:r.margin}},e.muuriMap=$e,e.useData=We,e.useDrag=Ke,e.useDraggable=Ye,e.useGrid=Ze,e.useGridContext=B,e.useItemContext=Y,e.useRefresh=Je,e.useShow=Qe,e.useVisibility=Xe,e.withHooks=function(e,t){le(Array.isArray(t)),t.forEach((function(e){le(ut.includes(e))})),le(0!==t.length);var n=st.filter((function(e){var n=it(e,1)[0];return t.includes(n)}));return function(t){return i.default.createElement(e,h({},t,function(e){return Object.assign.apply(Object,[{}].concat(at(e.map((function(e){var t=it(e,2),n=t[0];return(0,t[1])(et[n]())})))))}(n)))}},Object.defineProperty(e,"__esModule",{value:!0})}));
